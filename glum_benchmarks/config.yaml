# Benchmark Configuration
# Edit this file to configure which benchmarks to run and how to run them

# Steps to run
run_benchmarks: true # Run the benchmarks (can be slow)
analyze_results: true # Analyze and print results (writes CSV)
generate_plots: true # Generate comparison plots (reads CSV and writes PNGs)
update_docs: false # Copy figures to docs/_static and update benchmarks.rst and README.md

# Figures to include in docs/README (null = use defaults)
# Default for docs: all figures
# Default for readme: first non-normalized figure only
# Available: null, or list of figure filenames in the format "<dataset>-<distribution>.png"
# Example: intermediate-insurance-gaussian.png
docs_figures: null
readme_figures: null

# Output settings
run_name: "docs" # Subfolder name within results/ ("docs" CSV is git-tracked)
clear_output: True # Clear entire run_name directory before running

# Benchmark settings
iterations: 2 # Run each benchmark N times, report minimum (>=2 for skglm)
num_threads: 16 # Number of threads for parallel execution
num_rows: null # Limit rows per dataset (null = full dataset)
timeout: 100 # Timeout in seconds per benchmark run (reports as "not converged" if exceeded)

# Standardization approach per library:
#   "pre"      = pre-standardize continuous features in data loader (before OHE/format
#                conversion). Only continuous columns are scaled.
#   "internal" = library handles standardization internally (e.g. glum's scale_predictors)
#   "none"     = no standardization
# TODO: we might want to ommit this as a config option and just do the scaling in the data loader as a default
standardize:
  glum: pre   # glum handles via scale_predictors
  sklearn: pre     # pre-standardize in data loader
  h2o: pre    # h2o handles via standardize param
  celer: pre       # pre-standardize in data loader
  skglm: pre       # pre-standardize in data loader
  glmnet: pre # R glmnet handles via standardize param

# Storage format per library ("dense", "sparse", or "auto")
storage:
  glum: auto # Auto selects best format
  sklearn: csr
  h2o: csr
  celer: csc
  skglm: csc
  glmnet: csc # R glmnet supports sparse matrices

# PARAMETER GRID
# Each entry specifies a parameter set. Within each entry, the Cartesian
# product is computed. Across entries, results are unioned (not crossed).
#
# Available values:
#   libraries: ["glum", "sklearn", "h2o", "skglm", "celer", "zeros", "glmnet"]
#   datasets: ["intermediate-housing", "intermediate-insurance", "narrow-insurance", "wide-insurance","square-simulated"]
#   regularizations: ["lasso", "l2", "net"]
#   alphas: [0.0001, 0.001, 0.01]
#   distributions: ["gaussian", "gamma", "binomial", "poisson", "tweedie-p=1.5"]
#
# Use null (or omit) for any field to use its default value. Default refers to using all available values.
#
# Example: Run all regularizations for gaussian, but only lasso for gamma:
#   param_grid:
#     - distributions: [gaussian]
#       regularizations: [lasso, l2, net]
#     - distributions: [gamma]
#       regularizations: [lasso]

param_grid:
     - distributions: [gaussian]
       datasets: ["intermediate-housing"]
       regularizations: [lasso, l2]
       libraries: [glum, celer]
     - distributions: [gamma]
       datasets: ["intermediate-insurance"]
       regularizations: [lasso]
       libraries: [glum, h2o]
